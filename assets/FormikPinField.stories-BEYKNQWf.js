import{r as i,j as e,u as je}from"./index-urfBbsGr.js";import"./dialog-CQBJmZc0.js";import{u as Ae,F as _,a as q,c as Oe,b as $e}from"./index.esm-h5vPnfM3.js";import{B as L}from"./Button-B7eq-dzL.js";import{m as Be}from"./index-B8qhK8lp.js";import{F as We}from"./index.es-cXybDao3.js";import{t as be}from"./bundle-mjs-yGZq-iow.js";import{F as _e}from"./FormLabel-BcvpyoIn.js";import{T as qe}from"./Tooltip-BvYd5FXO.js";import{c as Y}from"./utils-Cfy_KVkN.js";import"./button-DJQes9JR.js";import"./index-DjACrQ8K.js";import"./index-DTIpGtTl.js";import"./index-DH8fbshI.js";import"./Label-ClAlGXLJ.js";import"./index-BgRkH7nZ.js";import"./index-dsYJb9KG.js";import"./tooltip-4S-az5-X.js";import"./index-DW48STyt.js";import"./index-iLdr0i6j.js";import"./index-DeM5atRo.js";import"./index-DJnAbWAY.js";import"./index-CV66AMyv.js";import"./index-5rSPY3Ff.js";import"./index-X71IwvA3.js";import"./index-Dq5B_PsA.js";import"./index-D4bC3-zv.js";import"./index-Bhwn5WC-.js";import"./index-DCNiurCH.js";import"./index-DNkTDphW.js";var Le=Object.defineProperty,He=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,xe=(n,t,a)=>t in n?Le(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a,ze=(n,t)=>{for(var a in t||(t={}))ye.call(t,a)&&xe(n,a,t[a]);if(ee)for(var a of ee(t))Se.call(t,a)&&xe(n,a,t[a]);return n},Xe=(n,t)=>He(n,Ge(t)),Ze=(n,t)=>{var a={};for(var o in n)ye.call(n,o)&&t.indexOf(o)<0&&(a[o]=n[o]);if(n!=null&&ee)for(var o of ee(n))t.indexOf(o)<0&&Se.call(n,o)&&(a[o]=n[o]);return a};function Je(n){let t=setTimeout(n,0),a=setTimeout(n,10),o=setTimeout(n,50);return[t,a,o]}function Ke(n){let t=i.useRef();return i.useEffect(()=>{t.current=n}),t.current}var Qe=18,ke=40,Ue=`${ke}px`,Ye=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function et({containerRef:n,inputRef:t,pushPasswordManagerStrategy:a,isFocused:o}){let[x,u]=i.useState(!1),[P,T]=i.useState(!1),[d,w]=i.useState(!1),N=i.useMemo(()=>a==="none"?!1:(a==="increase-width"||a==="experimental-no-flickering")&&x&&P,[x,P,a]),g=i.useCallback(()=>{let h=n.current,S=t.current;if(!h||!S||d||a==="none")return;let f=h,C=f.getBoundingClientRect().left+f.offsetWidth,$=f.getBoundingClientRect().top+f.offsetHeight/2,c=C-Qe,G=$;document.querySelectorAll(Ye).length===0&&document.elementFromPoint(c,G)===h||(u(!0),w(!0))},[n,t,d,a]);return i.useEffect(()=>{let h=n.current;if(!h||a==="none")return;function S(){let C=window.innerWidth-h.getBoundingClientRect().right;T(C>=ke)}S();let f=setInterval(S,1e3);return()=>{clearInterval(f)}},[n,a]),i.useEffect(()=>{let h=o||document.activeElement===t.current;if(a==="none"||!h)return;let S=setTimeout(g,0),f=setTimeout(g,2e3),C=setTimeout(g,5e3),$=setTimeout(()=>{w(!0)},6e3);return()=>{clearTimeout(S),clearTimeout(f),clearTimeout(C),clearTimeout($)}},[t,o,a,g]),{hasPWMBadge:x,willPushPWMBadge:N,PWM_BADGE_SPACE_WIDTH:Ue}}var Ee=i.createContext({}),Pe=i.forwardRef((n,t)=>{var a=n,{value:o,onChange:x,maxLength:u,textAlign:P="left",pattern:T,placeholder:d,inputMode:w="numeric",onComplete:N,pushPasswordManagerStrategy:g="increase-width",pasteTransformer:h,containerClassName:S,noScriptCSSFallback:f=tt,render:C,children:$}=a,c=Ze(a,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),G,ae,oe,se,de;let[Te,Ce]=i.useState(typeof c.defaultValue=="string"?c.defaultValue:""),p=o??Te,R=Ke(p),z=i.useCallback(r=>{x==null||x(r),Ce(r)},[x]),E=i.useMemo(()=>T?typeof T=="string"?new RegExp(T):T:null,[T]),m=i.useRef(null),te=i.useRef(null),ne=i.useRef({value:p,onChange:z,isIOS:typeof window<"u"&&((ae=(G=window==null?void 0:window.CSS)==null?void 0:G.supports)==null?void 0:ae.call(G,"-webkit-touch-callout","none"))}),Q=i.useRef({prev:[(oe=m.current)==null?void 0:oe.selectionStart,(se=m.current)==null?void 0:se.selectionEnd,(de=m.current)==null?void 0:de.selectionDirection]});i.useImperativeHandle(t,()=>m.current,[]),i.useEffect(()=>{let r=m.current,l=te.current;if(!r||!l)return;ne.current.value!==r.value&&ne.current.onChange(r.value),Q.current.prev=[r.selectionStart,r.selectionEnd,r.selectionDirection];function v(){if(document.activeElement!==r){Z(null),J(null);return}let s=r.selectionStart,b=r.selectionEnd,U=r.selectionDirection,k=r.maxLength,V=r.value,F=Q.current.prev,I=-1,M=-1,A;if(V.length!==0&&s!==null&&b!==null){let Re=s===b,De=s===V.length&&V.length<k;if(Re&&!De){let O=s;if(O===0)I=0,M=1,A="forward";else if(O===k)I=O-1,M=O,A="backward";else if(k>1&&V.length>1){let le=0;if(F[0]!==null&&F[1]!==null){A=O<F[1]?"backward":"forward";let Ve=F[0]===F[1]&&F[0]<k;A==="backward"&&!Ve&&(le=-1)}I=le+O,M=le+O+1}}I!==-1&&M!==-1&&I!==M&&m.current.setSelectionRange(I,M,A)}let ve=I!==-1?I:s,ge=M!==-1?M:b,Ne=A??U;Z(ve),J(ge),Q.current.prev=[ve,ge,Ne]}if(document.addEventListener("selectionchange",v,{capture:!0}),v(),document.activeElement===r&&re(!0),!document.getElementById("input-otp-style")){let s=document.createElement("style");if(s.id="input-otp-style",document.head.appendChild(s),s.sheet){let b="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";K(s.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),K(s.sheet,`[data-input-otp]:autofill { ${b} }`),K(s.sheet,`[data-input-otp]:-webkit-autofill { ${b} }`),K(s.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),K(s.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let j=()=>{l&&l.style.setProperty("--root-height",`${r.clientHeight}px`)};j();let y=new ResizeObserver(j);return y.observe(r),()=>{document.removeEventListener("selectionchange",v,{capture:!0}),y.disconnect()}},[]);let[ue,ce]=i.useState(!1),[X,re]=i.useState(!1),[D,Z]=i.useState(null),[B,J]=i.useState(null);i.useEffect(()=>{Je(()=>{var r,l,v,j;(r=m.current)==null||r.dispatchEvent(new Event("input"));let y=(l=m.current)==null?void 0:l.selectionStart,s=(v=m.current)==null?void 0:v.selectionEnd,b=(j=m.current)==null?void 0:j.selectionDirection;y!==null&&s!==null&&(Z(y),J(s),Q.current.prev=[y,s,b])})},[p,X]),i.useEffect(()=>{R!==void 0&&p!==R&&R.length<u&&p.length===u&&(N==null||N(p))},[u,N,R,p]);let W=et({containerRef:te,inputRef:m,pushPasswordManagerStrategy:g,isFocused:X}),pe=i.useCallback(r=>{let l=r.currentTarget.value.slice(0,u);if(l.length>0&&E&&!E.test(l)){r.preventDefault();return}typeof R=="string"&&l.length<R.length&&document.dispatchEvent(new Event("selectionchange")),z(l)},[u,z,R,E]),me=i.useCallback(()=>{var r;if(m.current){let l=Math.min(m.current.value.length,u-1),v=m.current.value.length;(r=m.current)==null||r.setSelectionRange(l,v),Z(l),J(v)}re(!0)},[u]),he=i.useCallback(r=>{var l,v;let j=m.current;if(!h&&(!ne.current.isIOS||!r.clipboardData||!j))return;let y=r.clipboardData.getData("text/plain"),s=h?h(y):y;r.preventDefault();let b=(l=m.current)==null?void 0:l.selectionStart,U=(v=m.current)==null?void 0:v.selectionEnd,k=(b!==U?p.slice(0,b)+s+p.slice(U):p.slice(0,b)+s+p.slice(b)).slice(0,u);if(k.length>0&&E&&!E.test(k))return;j.value=k,z(k);let V=Math.min(k.length,u-1),F=k.length;j.setSelectionRange(V,F),Z(V),J(F)},[u,z,E,p]),Fe=i.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),fe=i.useMemo(()=>({position:"absolute",inset:0,width:W.willPushPWMBadge?`calc(100% + ${W.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:W.willPushPWMBadge?`inset(0 ${W.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:P,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[W.PWM_BADGE_SPACE_WIDTH,W.willPushPWMBadge,P]),Ie=i.useMemo(()=>i.createElement("input",Xe(ze({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":p.length===0||void 0,"data-input-otp-mss":D,"data-input-otp-mse":B,inputMode:w,pattern:E==null?void 0:E.source,"aria-placeholder":d,style:fe,maxLength:u,value:p,ref:m,onPaste:r=>{var l;he(r),(l=c.onPaste)==null||l.call(c,r)},onChange:pe,onMouseOver:r=>{var l;ce(!0),(l=c.onMouseOver)==null||l.call(c,r)},onMouseLeave:r=>{var l;ce(!1),(l=c.onMouseLeave)==null||l.call(c,r)},onFocus:r=>{var l;me(),(l=c.onFocus)==null||l.call(c,r)},onBlur:r=>{var l;re(!1),(l=c.onBlur)==null||l.call(c,r)}})),[pe,me,he,w,fe,u,B,D,c,E==null?void 0:E.source,p]),ie=i.useMemo(()=>({slots:Array.from({length:u}).map((r,l)=>{var v;let j=X&&D!==null&&B!==null&&(D===B&&l===D||l>=D&&l<B),y=p[l]!==void 0?p[l]:null,s=p[0]!==void 0?null:(v=d==null?void 0:d[l])!=null?v:null;return{char:y,placeholderChar:s,isActive:j,hasFakeCaret:j&&y===null}}),isFocused:X,isHovering:!c.disabled&&ue}),[X,ue,u,B,D,c.disabled,p]),Me=i.useMemo(()=>C?C(ie):i.createElement(Ee.Provider,{value:ie},$),[$,ie,C]);return i.createElement(i.Fragment,null,f!==null&&i.createElement("noscript",null,i.createElement("style",null,f)),i.createElement("div",{ref:te,"data-input-otp-container":!0,style:Fe,className:S},Me,i.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Ie)))});Pe.displayName="Input";function K(n,t){try{n.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var tt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;function nt({className:n,containerClassName:t,...a}){return e.jsx(Pe,{"data-slot":"input-otp",containerClassName:Y("flex items-center gap-2 has-disabled:opacity-50",t),className:Y("disabled:cursor-not-allowed",n),...a})}function rt({className:n,...t}){return e.jsx("div",{"data-slot":"input-otp-group",className:Y("flex items-center",n),...t})}function it({index:n,className:t,...a}){const o=i.useContext(Ee),{char:x,hasFakeCaret:u,isActive:P}=(o==null?void 0:o.slots[n])??{};return e.jsxs("div",{"data-slot":"input-otp-slot","data-active":P,className:Y("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",t),...a,children:[x,u&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}function H({id:n,name:t,length:a,required:o=!1,label:x,labelType:u="small",tooltip:P,hideError:T=!1,className:d,data:w}){const[N,g,h]=Ae(t);return e.jsxs("div",{className:be("flex w-full flex-row",u==="small"&&"flex-col",d==null?void 0:d.field),children:[x&&e.jsx(_e,{id:n,required:o,label:x,labelType:u,tooltip:P,className:{label:d==null?void 0:d.label,tooltip:d==null?void 0:d.tooltip}}),e.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[e.jsx(nt,{maxLength:a,value:N.value,onChange:async S=>{await h.setValue(S),await h.setTouched(!0)},className:d==null?void 0:d.input,children:e.jsxs(rt,{children:[...Array(a).fill("").map((S,f)=>e.jsx(it,{index:f,"data-cy":`${w==null?void 0:w.cy}-${f+1}`,"data-test":`${w==null?void 0:w.test}-${f+1}`,className:be("h-9 text-base",!!g.error&&g.touched&&"border-destructive bg-destructive-background border-y",d==null?void 0:d.inputItem)}))]})}),g.error&&!T&&g.touched&&e.jsx(qe,{tooltip:g.error&&g.touched?g.error:void 0,delay:0,className:{tooltip:"max-w-120 text-sm"},children:e.jsx(We,{icon:Be,className:"text-destructive mr-1"})})]})]})}const At=()=>e.jsxs("div",{children:[e.jsx("div",{children:'The default 9-digit Formik pin field works with a "name" input and no other requirements. Form validation has to be done manually with a separate schema. The state is kept as a string including the whitespaces (see "value" below).'}),e.jsx(_,{initialValues:{pin:""},isInitialValid:!1,onSubmit:async(n,{resetForm:t})=>{alert(`Form submitted with value: ${n.pin}`),t()},children:({values:n})=>e.jsxs("div",{children:[e.jsxs(q,{children:[e.jsx(H,{name:"pin",length:9,className:{field:"my-2"}}),e.jsx(L,{type:"submit",children:"Submit"})]}),e.jsxs("div",{children:["Value: ",n.pin]})]})}),e.jsx("div",{children:'Values can be pasted into the field using either the format including spaces "123 456 789" or without "123456789"'})]}),Ot=()=>e.jsxs("div",{children:[e.jsx("div",{children:'As most other formik fields as well, this form can be marked to be required with the "required" prop. The corresponding sign is shown next to the label.'}),e.jsx(_,{initialValues:{pin:""},isInitialValid:!1,onSubmit:async(n,{resetForm:t})=>{alert(`Form submitted with value: ${n.pin}`),t()},children:({values:n})=>e.jsxs("div",{children:[e.jsxs(q,{children:[e.jsx(H,{required:!0,label:"PIN",name:"pin",length:9,className:{field:"my-2"}}),e.jsx(L,{type:"submit",children:"Submit"})]}),e.jsxs("div",{children:["Value: ",n.pin]})]})})]}),$t=()=>e.jsx("div",{children:e.jsx(_,{initialValues:{pin:""},isInitialValid:!1,onSubmit:async(n,{resetForm:t})=>{alert(`Form submitted with value: ${n.pin}`),t()},children:({values:n})=>e.jsxs("div",{children:[e.jsxs(q,{children:[e.jsx(H,{required:!0,labelType:"large",tooltip:"Tooltip for this input",label:"PIN",name:"pin",length:9,className:{field:"my-2"}}),e.jsx(L,{type:"submit",children:"Submit"})]}),e.jsxs("div",{children:["Value: ",n.pin]})]})})}),Bt=()=>e.jsxs("div",{children:[e.jsx("div",{children:"As most other formik components as well, the label can be accompanied by a tooltip with corresponding symbol."}),e.jsx(_,{initialValues:{pin:""},isInitialValid:!1,onSubmit:async(n,{resetForm:t})=>{alert(`Form submitted with value: ${n.pin}`),t()},children:({values:n})=>e.jsxs("div",{children:[e.jsxs(q,{children:[e.jsx(H,{required:!0,label:"PIN",tooltip:"Tooltip for this input",name:"pin",length:9,className:{field:"my-2"}}),e.jsx(L,{type:"submit",children:"Submit"})]}),e.jsxs("div",{children:["Value: ",n.pin]})]})})]}),Wt=()=>e.jsxs("div",{children:[e.jsx("div",{children:"Custom styling can be applied through the className prop and testing is facilitated through data-props."}),e.jsx(_,{initialValues:{pin:""},isInitialValid:!1,onSubmit:async(n,{resetForm:t})=>{alert(`Form submitted with value: ${n.pin}`),t()},children:({values:n})=>e.jsxs("div",{children:[e.jsxs(q,{children:[e.jsx(H,{required:!0,label:"PIN",name:"pin",length:9,className:{field:"mb-1 w-1/2",input:"bg-red-200",label:"text-blue-500"},data:{cy:"test"}}),e.jsx(L,{type:"submit",children:"Submit"})]}),e.jsxs("div",{children:["Value: ",n.pin]})]})})]}),_t=()=>e.jsxs("div",{children:[e.jsx("div",{children:"This PIN field should have an exact length of 9 characters or will display an error after being touched otherwise."}),e.jsx(_,{initialValues:{pin:""},isInitialValid:!1,onSubmit:async(n,{resetForm:t})=>{alert(`Form submitted with value: ${n.pin}`),t()},validationSchema:Oe().shape({pin:$e().required("This field is required").min(9,"Please ensure that the entire PIN is entered").max(9,"Please ensure that the entire PIN is entered")}),children:({values:n,isValid:t})=>e.jsxs("div",{children:[e.jsxs(q,{children:[e.jsx(H,{required:!0,label:"PIN",name:"pin",length:9,className:{field:"my-2"}}),e.jsx(L,{type:"submit",disabled:!t,children:"Submit"})]}),e.jsxs("div",{children:["Value: ",n.pin]}),e.jsxs("div",{children:["Valid?: ",String(t)]})]})})]});function we(n){const t={code:"code",li:"li",p:"p",ul:"ul",...je(),...n.components};return e.jsxs(e.Fragment,{children:[`
`,e.jsxs("div",{className:"prose prose-sm max-w-none",children:[e.jsxs(t.p,{className:"ladle-markdown",children:["The ",e.jsx(t.code,{className:"ladle-markdown",children:"FormikPinField"})," component is a Formik wrapper around the ",e.jsx(t.code,{className:"ladle-markdown",children:"PinField"})," component. In addition to labels, tooltips, etc. it also offers direct interfaces for form validation, error messages, and form submission handling."]}),e.jsx(t.p,{className:"ladle-markdown",children:"The FormikPinField accepts the following props:"}),e.jsxs(t.ul,{className:"ladle-markdown",children:[`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param id - The id of the input field."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param name - The name of the input field (used for Formik)."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param length - The length of the pin (number of digits)."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param required - Indicate whether the field is required or not."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param label - The text displayed as label."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param labelType - The optional labelType can be used to change the size and position of the label according to pre-defined standards."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param tooltip - The optional tooltip is shown on hover over the tooltip next to the label."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param hideError - Indicate whether the error message should be hidden or not."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param className - The class names for the different parts of the component."}),`
`,e.jsx(t.li,{className:"ladle-markdown",children:"@param data - Optional data attributes for testing purposes."}),`
`]})]}),`
`,`
`]})}function lt(n={}){const{wrapper:t}={...je(),...n.components};return t?e.jsx(t,{...n,children:e.jsx(we,{...n})}):we(n)}lt.storyName="Readme";typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{At as Default,$t as LargeLabel,lt as MDXContent,Ot as Required,Wt as Styled,Bt as Tooltip,_t as Validation};
