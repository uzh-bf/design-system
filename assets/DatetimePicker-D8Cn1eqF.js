import{r as x,j as i}from"./index-DGqhs3Ao.js";import{a as C}from"./index-D9GdmwpL.js";import{m as ee}from"./index-Dx3L3kPF.js";import{F as K}from"./index.es-BXtmxrql.js";import{d as te}from"./dayjs.min-BaaheErM.js";import{t as W}from"./bundle-mjs-yGZq-iow.js";import{F as re}from"./FormLabel-D_TweHJ1.js";import{c as G}from"./utils-Cme_e3GL.js";import{T as se}from"./Tooltip-Fz9xjnS_.js";import{B as ne}from"./button-Di3qs9j8.js";import{t as ce,a as ie,b as ue,c as oe,C as fe,e as le}from"./calendar-DUNQsKiz.js";import{I as ae}from"./input-BLz5r_Wm.js";import{P as me,a as de,b as xe}from"./popover-BoN9lESv.js";import{S as pe,a as we,b as ye,c as je,d as q}from"./select-CdNa527n.js";import{c as Se}from"./createLucideIcon-CCuHKjiZ.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ae=Se("clock",Te);function He(e,t,s){const{years:o=0,months:n=0,weeks:l=0,days:f=0,hours:y=0,minutes:j=0,seconds:u=0}=t,p=ce(e,s==null?void 0:s.in),m=n||o?ie(p,n+o*12):p,w=f||l?ue(m,f+l*7):m,a=j+y*60,c=(u+a*60)*1e3;return oe(e,+w+c)}function ge(e){return/^(0[0-9]|1[0-9]|2[0-3])$/.test(e)}function Me(e){return/^(0[1-9]|1[0-2])$/.test(e)}function be(e){return/^[0-5][0-9]$/.test(e)}function I(e,{max:t,min:s=0,loop:o=!1}){let n=parseInt(e,10);return Number.isNaN(n)?"00":(o?(n>t&&(n=s),n<s&&(n=t)):(n>t&&(n=t),n<s&&(n=s)),n.toString().padStart(2,"0"))}function J(e){return ge(e)?e:I(e,{max:23})}function Q(e){return Me(e)?e:I(e,{min:1,max:12})}function V(e){return be(e)?e:I(e,{max:59})}function E(e,{min:t,max:s,step:o}){let n=parseInt(e,10);return Number.isNaN(n)?"00":(n+=o,I(String(n),{min:t,max:s,loop:!0}))}function ke(e,t){return E(e,{min:0,max:23,step:t})}function Ve(e,t){return E(e,{min:1,max:12,step:t})}function z(e,t){return E(e,{min:0,max:59,step:t})}function Ie(e,t){const s=V(t);return e.setMinutes(parseInt(s,10)),e}function Pe(e,t){const s=V(t);return e.setSeconds(parseInt(s,10)),e}function De(e,t){const s=J(t);return e.setHours(parseInt(s,10)),e}function ve(e,t,s){const o=parseInt(Q(t),10),n=Be(o,s);return e.setHours(n),e}function B(e,t,s,o){switch(s){case"minutes":return Ie(e,t);case"seconds":return Pe(e,t);case"hours":return De(e,t);case"12hours":return o?ve(e,t,o):e;default:return e}}function Ne(e,t){if(!e)return"00";switch(t){case"minutes":return V(String(e.getMinutes()));case"seconds":return V(String(e.getSeconds()));case"hours":return J(String(e.getHours()));case"12hours":return Q(String(X(e.getHours())));default:return"00"}}function $e(e,t,s){switch(s){case"minutes":return z(e,t);case"seconds":return z(e,t);case"hours":return ke(e,t);case"12hours":return Ve(e,t);default:return"00"}}function Be(e,t){return t==="PM"?e<=11?e+12:e:t==="AM"&&e===12?0:e}function X(e){return e===0||e===12?"12":e>=22?`${e-12}`:e%12>9?`${e}`:`0${e%12}`}const Z=x.forwardRef(({period:e,setPeriod:t,date:s,onDateChange:o,onLeftFocus:n,onRightFocus:l},f)=>{const y=u=>{u.key==="ArrowRight"&&(l==null||l()),u.key==="ArrowLeft"&&(n==null||n())},j=u=>{if(t==null||t(u),s){const p=new Date(s),m=X(s.getHours());o==null||o(B(p,m.toString(),"12hours",e==="AM"?"PM":"AM"))}};return i.jsx("div",{className:"flex h-10 items-center",children:i.jsxs(pe,{defaultValue:e,onValueChange:u=>j(u),children:[i.jsx(we,{ref:f,className:"focus:bg-accent focus:text-accent-foreground w-[65px]",onKeyDown:y,children:i.jsx(ye,{})}),i.jsxs(je,{children:[i.jsx(q,{value:"AM",children:"AM"}),i.jsx(q,{value:"PM",children:"PM"})]})]})})});Z.displayName="TimePeriodSelect";const k=x.forwardRef(({className:e,type:t="tel",value:s,id:o,name:n,date:l=new Date(new Date().setHours(0,0,0,0)),onDateChange:f,onChange:y,onKeyDown:j,picker:u,period:p,onLeftFocus:m,onRightFocus:w,...a},A)=>{const[c,b]=x.useState(!1),[P,D]=x.useState("0");x.useEffect(()=>{if(c){const r=setTimeout(()=>{b(!1)},2e3);return()=>clearTimeout(r)}},[c]);const g=x.useMemo(()=>Ne(l,u),[l,u]),S=r=>u==="12hours"&&c&&g.slice(1,2)==="1"&&P==="0"?`0${r}`:c?g.slice(1,2)+r:`0${r}`,v=r=>{if(r.key!=="Tab"){if(r.preventDefault(),r.key==="ArrowRight"&&(w==null||w()),r.key==="ArrowLeft"&&(m==null||m()),["ArrowUp","ArrowDown"].includes(r.key)){const H=r.key==="ArrowUp"?1:-1,M=$e(g,H,u);c&&b(!1);const T=l?new Date(l):new Date;f==null||f(B(T,M,u,p))}if(r.key>="0"&&r.key<="9"){u==="12hours"&&D(r.key);const H=S(r.key);c&&(w==null||w()),b(T=>!T);const M=l?new Date(l):new Date;f==null||f(B(M,H,u,p))}}};return i.jsx(ae,{ref:A,id:o||u,name:n||u,className:G("focus:bg-accent focus:text-accent-foreground w-[48px] text-center font-mono text-base tabular-nums caret-transparent [&::-webkit-inner-spin-button]:appearance-none",e),value:s||g,onChange:r=>{r.preventDefault(),y==null||y(r)},type:t,inputMode:"decimal",onKeyDown:r=>{j==null||j(r),v(r)},...a})});k.displayName="TimePickerInput";const L=x.forwardRef(({date:e,onChange:t,disabled:s=!1,hourCycle:o=24,granularity:n="second",dataHours:l,dataMinutes:f,dataSeconds:y},j)=>{const u=x.useRef(null),p=x.useRef(null),m=x.useRef(null),w=x.useRef(null),[a,A]=x.useState(e&&e.getHours()>=12?"PM":"AM");return x.useImperativeHandle(j,()=>({minuteRef:u.current,hourRef:p.current,secondRef:m.current,periodRef:w.current}),[u,p,m]),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("label",{htmlFor:"datetime-picker-hour-input",className:"cursor-pointer",children:i.jsx(Ae,{className:"mr-2 h-4 w-4"})}),i.jsx(k,{disabled:s,picker:o===24?"hours":"12hours",date:e,id:"datetime-picker-hour-input",onDateChange:t,ref:p,period:a,onRightFocus:()=>{var c;return(c=u==null?void 0:u.current)==null?void 0:c.focus()},className:"h-8 text-sm","data-cy":l==null?void 0:l.cy,"data-test":l==null?void 0:l.test}),(n==="minute"||n==="second")&&i.jsxs(i.Fragment,{children:[":",i.jsx(k,{disabled:s,picker:"minutes",date:e,onDateChange:t,ref:u,onLeftFocus:()=>{var c;return(c=p==null?void 0:p.current)==null?void 0:c.focus()},onRightFocus:()=>{var c;return(c=m==null?void 0:m.current)==null?void 0:c.focus()},className:"h-8 text-sm","data-cy":f==null?void 0:f.cy,"data-test":f==null?void 0:f.test})]}),n==="second"&&i.jsxs(i.Fragment,{children:[":",i.jsx(k,{disabled:s,picker:"seconds",date:e,onDateChange:t,ref:m,onLeftFocus:()=>{var c;return(c=u==null?void 0:u.current)==null?void 0:c.focus()},onRightFocus:()=>{var c;return(c=w==null?void 0:w.current)==null?void 0:c.focus()},className:"h-8 text-sm","data-cy":y==null?void 0:y.cy,"data-test":y==null?void 0:y.test})]}),o===12&&i.jsx("div",{className:"grid gap-1 text-center",children:i.jsx(Z,{period:a,setPeriod:A,date:e,onDateChange:c=>{t==null||t(c),c&&(c==null?void 0:c.getHours())>=12?A("PM"):A("AM")},ref:w,onLeftFocus:()=>{var c;return(c=m==null?void 0:m.current)==null?void 0:c.focus()}})})]})});L.displayName="TimePicker";const Ee=x.forwardRef(({locale:e=le,defaultPopupValue:t=new Date(new Date().setHours(0,0,0,0)),value:s,onChange:o,onMonthChange:n,hourCycle:l=24,disabled:f=!1,displayFormat:y,granularity:j="second",placeholder:u="Pick a date",error:p,hideError:m,isTouched:w,className:a,label:A,labelType:c="small",align:b="start",captionLayout:P="dropdown",required:D=!1,tooltip:g,...S},v)=>{var Y,O,U,_;const[r,H]=x.useState(s??t),M=x.useRef(null),[T,N]=x.useState(s??void 0);x.useEffect(()=>{N(s)},[s]);const R=d=>{if(!d)return;if(!t){d.setHours((r==null?void 0:r.getHours())??0,(r==null?void 0:r.getMinutes())??0,(r==null?void 0:r.getSeconds())??0),n==null||n(d),H(d);return}const h=(d.getTime()-t.getTime())/(1e3*60*60*24),$=He(t,{days:Math.ceil(h)});$.setHours((r==null?void 0:r.getHours())??0,(r==null?void 0:r.getMinutes())??0,(r==null?void 0:r.getSeconds())??0),n==null||n($),H($)},F=d=>{d&&(o==null||o(d),H(d),N(d))};return x.useImperativeHandle(v,()=>({...M.current,value:T}),[T]),i.jsxs(me,{children:[i.jsxs("div",{className:W("flex w-[280px] flex-row",c==="small"&&"flex-col",a==null?void 0:a.trigger),children:[A&&i.jsx(re,{required:D,label:A,labelType:c,tooltip:g,className:{label:a==null?void 0:a.label,tooltip:a==null?void 0:a.tooltip}}),i.jsxs("div",{className:"flex flex-row gap-2",children:[i.jsx(de,{asChild:!0,disabled:f,children:i.jsxs(ne,{variant:"outline",type:"button",disabled:f,className:G("w-44 justify-start text-left text-base font-normal",!T&&"text-muted-foreground",!!p&&w&&"border-destructive bg-destructive-background",a==null?void 0:a.input),ref:M,"data-cy":(Y=S.dataTrigger)==null?void 0:Y.cy,"data-test":(O=S.dataTrigger)==null?void 0:O.test,children:[i.jsx(K,{icon:C,className:"mr-2.5 h-4 w-4"}),T?te(T).format(y??"DD.MM.YYYY, HH:mm"):i.jsx("span",{children:u})]})}),p&&!m&&w&&i.jsx(se,{tooltip:p,delay:0,className:{tooltip:W("max-w-120 text-sm",a==null?void 0:a.error)},children:i.jsx(K,{icon:ee,className:"text-destructive mr-1"})})]})]}),i.jsxs(xe,{className:"w-auto p-0",align:b,children:[i.jsx(fe,{mode:"single",captionLayout:P,disabled:f,selected:T,month:r,onSelect:d=>{d&&(d.setHours((r==null?void 0:r.getHours())??0,(r==null?void 0:r.getMinutes())??0,(r==null?void 0:r.getSeconds())??0),F(d))},onMonthChange:R,locale:e,dataNextMonth:S.dataNextMonth,dataPreviousMonth:S.dataPreviousMonth,"data-cy":(U=S.dataCalendar)==null?void 0:U.cy,"data-test":(_=S.dataCalendar)==null?void 0:_.test,...S}),j!=="day"&&i.jsx("div",{className:"border-border border-t p-3",children:i.jsx(L,{disabled:f,onChange:d=>{o==null||o(d),N(d),d&&H(d)},date:r,hourCycle:l,granularity:j,dataHours:S.dataHours,dataMinutes:S.dataMinutes,dataSeconds:S.dataSeconds})})]})]})});Ee.displayName="DateTimePicker";export{Ee as D};
