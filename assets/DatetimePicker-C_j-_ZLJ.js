import{r as p,j as i}from"./index-eP5EzB1W.js";import{c as z}from"./utils-B-Iun-Yg.js";import{a as F}from"./index-BRJzqgic.js";import{B as h}from"./index-n6cSTtfq.js";import{F as K}from"./index.es-Bdq5X782.js";import{d as C}from"./dayjs.min-uxsYXPVO.js";import{t as W}from"./bundle-mjs-BkWO730n.js";import{F as ee}from"./FormLabel-D31lhTNz.js";import{T as te}from"./Tooltip-Dhh84U9f.js";import{B as re}from"./button-CEXONiIL.js";import{t as se,a as ne,b as ie,c as ce,C as ue,e as oe}from"./calendar-Bj64os1B.js";import{I as fe}from"./input-_kwIBTry.js";import{P as le,a as ae,b as me}from"./popover-BIUxi6N3.js";import{S as de,a as xe,b as pe,c as ye,d as _}from"./select-nwsscfwD.js";import{c as we}from"./createLucideIcon-O1nc4YDz.js";/**
 * @license lucide-react v0.424.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);function Se(e,t){const{years:r=0,months:o=0,weeks:s=0,days:l=0,hours:a=0,minutes:j=0,seconds:S=0}=t,c=se(e),y=o||r?ne(c,o+r*12):c,d=l||s?ie(y,l+s*7):y,w=j+a*60,A=(S+w*60)*1e3;return ce(e,d.getTime()+A)}function Te(e){return/^(0[0-9]|1[0-9]|2[0-3])$/.test(e)}function Ae(e){return/^(0[1-9]|1[0-2])$/.test(e)}function He(e){return/^[0-5][0-9]$/.test(e)}function D(e,{max:t,min:r=0,loop:o=!1}){let s=parseInt(e,10);return Number.isNaN(s)?"00":(o?(s>t&&(s=r),s<r&&(s=t)):(s>t&&(s=t),s<r&&(s=r)),s.toString().padStart(2,"0"))}function G(e){return Te(e)?e:D(e,{max:23})}function J(e){return Ae(e)?e:D(e,{min:1,max:12})}function P(e){return He(e)?e:D(e,{max:59})}function B(e,{min:t,max:r,step:o}){let s=parseInt(e,10);return Number.isNaN(s)?"00":(s+=o,D(String(s),{min:t,max:r,loop:!0}))}function Me(e,t){return B(e,{min:0,max:23,step:t})}function ge(e,t){return B(e,{min:1,max:12,step:t})}function q(e,t){return B(e,{min:0,max:59,step:t})}function ke(e,t){const r=P(t);return e.setMinutes(parseInt(r,10)),e}function Ve(e,t){const r=P(t);return e.setSeconds(parseInt(r,10)),e}function be(e,t){const r=G(t);return e.setHours(parseInt(r,10)),e}function Ie(e,t,r){const o=parseInt(J(t),10),s=Ne(o,r);return e.setHours(s),e}function $(e,t,r,o){switch(r){case"minutes":return ke(e,t);case"seconds":return Ve(e,t);case"hours":return be(e,t);case"12hours":return o?Ie(e,t,o):e;default:return e}}function Pe(e,t){if(!e)return"00";switch(t){case"minutes":return P(String(e.getMinutes()));case"seconds":return P(String(e.getSeconds()));case"hours":return G(String(e.getHours()));case"12hours":return J(String(Q(e.getHours())));default:return"00"}}function De(e,t,r){switch(r){case"minutes":return q(e,t);case"seconds":return q(e,t);case"hours":return Me(e,t);case"12hours":return ge(e,t);default:return"00"}}function Ne(e,t){return t==="PM"?e<=11?e+12:e:t==="AM"&&e===12?0:e}function Q(e){return e===0||e===12?"12":e>=22?`${e-12}`:e%12>9?`${e}`:`0${e%12}`}const X=p.forwardRef(({period:e,setPeriod:t,date:r,onDateChange:o,onLeftFocus:s,onRightFocus:l},a)=>{const j=c=>{c.key==="ArrowRight"&&(l==null||l()),c.key==="ArrowLeft"&&(s==null||s())},S=c=>{if(t==null||t(c),r){const y=new Date(r),d=Q(r.getHours());o==null||o($(y,d.toString(),"12hours",e==="AM"?"PM":"AM"))}};return i.jsx("div",{className:"flex h-10 items-center",children:i.jsxs(de,{defaultValue:e,onValueChange:c=>S(c),children:[i.jsx(xe,{ref:a,className:"w-[65px] focus:bg-accent focus:text-accent-foreground",onKeyDown:j,children:i.jsx(pe,{})}),i.jsxs(ye,{children:[i.jsx(_,{value:"AM",children:"AM"}),i.jsx(_,{value:"PM",children:"PM"})]})]})})});X.displayName="TimePeriodSelect";const I=p.forwardRef(({className:e,type:t="tel",value:r,id:o,name:s,date:l=new Date(new Date().setHours(0,0,0,0)),onDateChange:a,onChange:j,onKeyDown:S,picker:c,period:y,onLeftFocus:d,onRightFocus:w,...m},A)=>{const[n,V]=p.useState(!1),[N,T]=p.useState("0");p.useEffect(()=>{if(n){const f=setTimeout(()=>{V(!1)},2e3);return()=>clearTimeout(f)}},[n]);const g=p.useMemo(()=>Pe(l,c),[l,c]),u=f=>c==="12hours"&&n&&g.slice(1,2)==="1"&&N==="0"?`0${f}`:n?g.slice(1,2)+f:`0${f}`,k=f=>{if(f.key!=="Tab"){if(f.preventDefault(),f.key==="ArrowRight"&&(w==null||w()),f.key==="ArrowLeft"&&(d==null||d()),["ArrowUp","ArrowDown"].includes(f.key)){const H=f.key==="ArrowUp"?1:-1,M=De(g,H,c);n&&V(!1);const b=l?new Date(l):new Date;a==null||a($(b,M,c,y))}if(f.key>="0"&&f.key<="9"){c==="12hours"&&T(f.key);const H=u(f.key);n&&(w==null||w()),V(b=>!b);const M=l?new Date(l):new Date;a==null||a($(M,H,c,y))}}};return i.jsx(fe,{ref:A,id:o||c,name:s||c,className:z("w-[48px] text-center font-mono text-base tabular-nums caret-transparent focus:bg-accent focus:text-accent-foreground [&::-webkit-inner-spin-button]:appearance-none",e),value:r||g,onChange:f=>{f.preventDefault(),j==null||j(f)},type:t,inputMode:"decimal",onKeyDown:f=>{S==null||S(f),k(f)},...m})});I.displayName="TimePickerInput";const Z=p.forwardRef(({date:e,onChange:t,disabled:r=!1,hourCycle:o=24,granularity:s="second",dataHours:l,dataMinutes:a,dataSeconds:j},S)=>{const c=p.useRef(null),y=p.useRef(null),d=p.useRef(null),w=p.useRef(null),[m,A]=p.useState(e&&e.getHours()>=12?"PM":"AM");return p.useImperativeHandle(S,()=>({minuteRef:c.current,hourRef:y.current,secondRef:d.current,periodRef:w.current}),[c,y,d]),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("label",{htmlFor:"datetime-picker-hour-input",className:"cursor-pointer",children:i.jsx(je,{className:"mr-2 h-4 w-4"})}),i.jsx(I,{disabled:r,picker:o===24?"hours":"12hours",date:e,id:"datetime-picker-hour-input",onDateChange:t,ref:y,period:m,onRightFocus:()=>{var n;return(n=c==null?void 0:c.current)==null?void 0:n.focus()},className:"h-8 text-sm","data-cy":l==null?void 0:l.cy,"data-test":l==null?void 0:l.test}),(s==="minute"||s==="second")&&i.jsxs(i.Fragment,{children:[":",i.jsx(I,{disabled:r,picker:"minutes",date:e,onDateChange:t,ref:c,onLeftFocus:()=>{var n;return(n=y==null?void 0:y.current)==null?void 0:n.focus()},onRightFocus:()=>{var n;return(n=d==null?void 0:d.current)==null?void 0:n.focus()},className:"h-8 text-sm","data-cy":a==null?void 0:a.cy,"data-test":a==null?void 0:a.test})]}),s==="second"&&i.jsxs(i.Fragment,{children:[":",i.jsx(I,{disabled:r,picker:"seconds",date:e,onDateChange:t,ref:d,onLeftFocus:()=>{var n;return(n=c==null?void 0:c.current)==null?void 0:n.focus()},onRightFocus:()=>{var n;return(n=w==null?void 0:w.current)==null?void 0:n.focus()},className:"h-8 text-sm","data-cy":j==null?void 0:j.cy,"data-test":j==null?void 0:j.test})]}),o===12&&i.jsx("div",{className:"grid gap-1 text-center",children:i.jsx(X,{period:m,setPeriod:A,date:e,onDateChange:n=>{t==null||t(n),n&&(n==null?void 0:n.getHours())>=12?A("PM"):A("AM")},ref:w,onLeftFocus:()=>{var n;return(n=d==null?void 0:d.current)==null?void 0:n.focus()}})})]})});Z.displayName="TimePicker";const ve=p.forwardRef(({locale:e=oe,defaultPopupValue:t=new Date(new Date().setHours(0,0,0,0)),value:r,onChange:o,onMonthChange:s,hourCycle:l=24,disabled:a=!1,displayFormat:j,granularity:S="second",placeholder:c="Pick a date",error:y,hideError:d,isTouched:w,className:m,label:A,labelType:n="small",required:V=!1,tooltip:N,...T},g)=>{var E,Y,O,U;const[u,k]=p.useState(r??t),f=p.useRef(null),[H,M]=p.useState(r??void 0);p.useEffect(()=>{M(r)},[r]);const b=x=>{if(!x)return;if(!t){x.setHours((u==null?void 0:u.getHours())??0,(u==null?void 0:u.getMinutes())??0,(u==null?void 0:u.getSeconds())??0),s==null||s(x),k(x);return}const R=(x.getTime()-t.getTime())/(1e3*60*60*24),v=Se(t,{days:Math.ceil(R)});v.setHours((u==null?void 0:u.getHours())??0,(u==null?void 0:u.getMinutes())??0,(u==null?void 0:u.getSeconds())??0),s==null||s(v),k(v)},L=x=>{x&&(o==null||o(x),k(x),M(x))};return p.useImperativeHandle(g,()=>({...f.current,value:H}),[H]),i.jsxs(le,{children:[i.jsx(ae,{asChild:!0,disabled:a,children:i.jsxs("div",{className:W("flex w-[280px] flex-row",n==="small"&&"flex-col",m==null?void 0:m.trigger),children:[A&&i.jsx(ee,{required:V,label:A,labelType:n,tooltip:N,className:{label:m==null?void 0:m.label,tooltip:m==null?void 0:m.tooltip}}),i.jsxs("div",{className:"flex flex-row gap-2",children:[i.jsxs(re,{variant:"outline",type:"button",disabled:a,className:z("w-44 justify-start text-left text-base font-normal",!H&&"text-muted-foreground",!!y&&w&&"border-red-600",m==null?void 0:m.input),ref:f,"data-cy":(E=T.dataTrigger)==null?void 0:E.cy,"data-test":(Y=T.dataTrigger)==null?void 0:Y.test,children:[i.jsx(K,{icon:F,className:"mr-2.5 h-4 w-4"}),H?C(H).format(j??"DD.MM.YYYY, HH:mm"):i.jsx("span",{children:c})]}),y&&!d&&w&&i.jsx(te,{tooltip:y,delay:0,className:{tooltip:W("max-w-[30rem] text-sm",m==null?void 0:m.error)},children:i.jsx(K,{icon:h,className:"mr-1 text-red-600"})})]})]})}),i.jsxs(me,{className:"w-auto p-0",children:[i.jsx(ue,{mode:"single",disabled:a,selected:H,month:u,onSelect:x=>{x&&(x.setHours((u==null?void 0:u.getHours())??0,(u==null?void 0:u.getMinutes())??0,(u==null?void 0:u.getSeconds())??0),L(x))},onMonthChange:b,locale:e,dataNextMonth:T.dataNextMonth,dataPreviousMonth:T.dataPreviousMonth,"data-cy":(O=T.dataCalendar)==null?void 0:O.cy,"data-test":(U=T.dataCalendar)==null?void 0:U.test,...T}),S!=="day"&&i.jsx("div",{className:"border-t border-border p-3",children:i.jsx(Z,{disabled:a,onChange:x=>{o==null||o(x),M(x),x&&k(x)},date:u,hourCycle:l,granularity:S,dataHours:T.dataHours,dataMinutes:T.dataMinutes,dataSeconds:T.dataSeconds})})]})]})});ve.displayName="DateTimePicker";export{ve as D};
