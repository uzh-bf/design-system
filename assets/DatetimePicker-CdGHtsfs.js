import{r as p,j as c}from"./index-D2WrkbGN.js";import{a as h}from"./index-D9GdmwpL.js";import{m as C}from"./index-B8qhK8lp.js";import{F as _}from"./index.es-BTzGEUzS.js";import{d as ee}from"./dayjs.min-CKyMwVju.js";import{t as K}from"./bundle-mjs-yGZq-iow.js";import{F as te}from"./FormLabel-DExOixty.js";import{c as z}from"./utils-CTthz5Dt.js";import{T as re}from"./Tooltip-BFAqJV5J.js";import{B as se}from"./button-CWrPgW-K.js";import{t as ne,a as ce,b as ie,c as ue,C as oe,e as fe}from"./calendar-CVzGlh-8.js";import{I as le}from"./input-CVlkflnY.js";import{P as ae,a as me,b as de}from"./popover-2KcJYHsj.js";import{S as xe,a as pe,b as ye,c as we,d as W}from"./select-ptntv73r.js";import{c as je}from"./createLucideIcon-DnYMGqd7.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Te=je("clock",Se);function Ae(e,t,r){const{years:o=0,months:s=0,weeks:a=0,days:l=0,hours:j=0,minutes:T=0,seconds:u=0}=t,y=ne(e,r==null?void 0:r.in),d=s||o?ce(y,s+o*12):y,w=l||a?ie(d,l+a*7):d,m=T+j*60,n=(u+m*60)*1e3;return ue(e,+w+n)}function He(e){return/^(0[0-9]|1[0-9]|2[0-3])$/.test(e)}function ge(e){return/^(0[1-9]|1[0-2])$/.test(e)}function Me(e){return/^[0-5][0-9]$/.test(e)}function I(e,{max:t,min:r=0,loop:o=!1}){let s=parseInt(e,10);return Number.isNaN(s)?"00":(o?(s>t&&(s=r),s<r&&(s=t)):(s>t&&(s=t),s<r&&(s=r)),s.toString().padStart(2,"0"))}function G(e){return He(e)?e:I(e,{max:23})}function J(e){return ge(e)?e:I(e,{min:1,max:12})}function V(e){return Me(e)?e:I(e,{max:59})}function B(e,{min:t,max:r,step:o}){let s=parseInt(e,10);return Number.isNaN(s)?"00":(s+=o,I(String(s),{min:t,max:r,loop:!0}))}function be(e,t){return B(e,{min:0,max:23,step:t})}function ke(e,t){return B(e,{min:1,max:12,step:t})}function q(e,t){return B(e,{min:0,max:59,step:t})}function Ve(e,t){const r=V(t);return e.setMinutes(parseInt(r,10)),e}function Ie(e,t){const r=V(t);return e.setSeconds(parseInt(r,10)),e}function Pe(e,t){const r=G(t);return e.setHours(parseInt(r,10)),e}function De(e,t,r){const o=parseInt(J(t),10),s=$e(o,r);return e.setHours(s),e}function $(e,t,r,o){switch(r){case"minutes":return Ve(e,t);case"seconds":return Ie(e,t);case"hours":return Pe(e,t);case"12hours":return o?De(e,t,o):e;default:return e}}function ve(e,t){if(!e)return"00";switch(t){case"minutes":return V(String(e.getMinutes()));case"seconds":return V(String(e.getSeconds()));case"hours":return G(String(e.getHours()));case"12hours":return J(String(Q(e.getHours())));default:return"00"}}function Ne(e,t,r){switch(r){case"minutes":return q(e,t);case"seconds":return q(e,t);case"hours":return be(e,t);case"12hours":return ke(e,t);default:return"00"}}function $e(e,t){return t==="PM"?e<=11?e+12:e:t==="AM"&&e===12?0:e}function Q(e){return e===0||e===12?"12":e>=22?`${e-12}`:e%12>9?`${e}`:`0${e%12}`}const X=p.forwardRef(({period:e,setPeriod:t,date:r,onDateChange:o,onLeftFocus:s,onRightFocus:a},l)=>{const j=u=>{u.key==="ArrowRight"&&(a==null||a()),u.key==="ArrowLeft"&&(s==null||s())},T=u=>{if(t==null||t(u),r){const y=new Date(r),d=Q(r.getHours());o==null||o($(y,d.toString(),"12hours",e==="AM"?"PM":"AM"))}};return c.jsx("div",{className:"flex h-10 items-center",children:c.jsxs(xe,{defaultValue:e,onValueChange:u=>T(u),children:[c.jsx(pe,{ref:l,className:"focus:bg-accent focus:text-accent-foreground w-[65px]",onKeyDown:j,children:c.jsx(ye,{})}),c.jsxs(we,{children:[c.jsx(W,{value:"AM",children:"AM"}),c.jsx(W,{value:"PM",children:"PM"})]})]})})});X.displayName="TimePeriodSelect";const k=p.forwardRef(({className:e,type:t="tel",value:r,id:o,name:s,date:a=new Date(new Date().setHours(0,0,0,0)),onDateChange:l,onChange:j,onKeyDown:T,picker:u,period:y,onLeftFocus:d,onRightFocus:w,...m},H)=>{const[n,b]=p.useState(!1),[P,D]=p.useState("0");p.useEffect(()=>{if(n){const f=setTimeout(()=>{b(!1)},2e3);return()=>clearTimeout(f)}},[n]);const S=p.useMemo(()=>ve(a,u),[a,u]),v=f=>u==="12hours"&&n&&S.slice(1,2)==="1"&&P==="0"?`0${f}`:n?S.slice(1,2)+f:`0${f}`,i=f=>{if(f.key!=="Tab"){if(f.preventDefault(),f.key==="ArrowRight"&&(w==null||w()),f.key==="ArrowLeft"&&(d==null||d()),["ArrowUp","ArrowDown"].includes(f.key)){const M=f.key==="ArrowUp"?1:-1,A=Ne(S,M,u);n&&b(!1);const g=a?new Date(a):new Date;l==null||l($(g,A,u,y))}if(f.key>="0"&&f.key<="9"){u==="12hours"&&D(f.key);const M=v(f.key);n&&(w==null||w()),b(g=>!g);const A=a?new Date(a):new Date;l==null||l($(A,M,u,y))}}};return c.jsx(le,{ref:H,id:o||u,name:s||u,className:z("focus:bg-accent focus:text-accent-foreground w-[48px] text-center font-mono text-base tabular-nums caret-transparent [&::-webkit-inner-spin-button]:appearance-none",e),value:r||S,onChange:f=>{f.preventDefault(),j==null||j(f)},type:t,inputMode:"decimal",onKeyDown:f=>{T==null||T(f),i(f)},...m})});k.displayName="TimePickerInput";const Z=p.forwardRef(({date:e,onChange:t,disabled:r=!1,hourCycle:o=24,granularity:s="second",dataHours:a,dataMinutes:l,dataSeconds:j},T)=>{const u=p.useRef(null),y=p.useRef(null),d=p.useRef(null),w=p.useRef(null),[m,H]=p.useState(e&&e.getHours()>=12?"PM":"AM");return p.useImperativeHandle(T,()=>({minuteRef:u.current,hourRef:y.current,secondRef:d.current,periodRef:w.current}),[u,y,d]),c.jsxs("div",{className:"flex items-center justify-center gap-2",children:[c.jsx("label",{htmlFor:"datetime-picker-hour-input",className:"cursor-pointer",children:c.jsx(Te,{className:"mr-2 h-4 w-4"})}),c.jsx(k,{disabled:r,picker:o===24?"hours":"12hours",date:e,id:"datetime-picker-hour-input",onDateChange:t,ref:y,period:m,onRightFocus:()=>{var n;return(n=u==null?void 0:u.current)==null?void 0:n.focus()},className:"h-8 text-sm","data-cy":a==null?void 0:a.cy,"data-test":a==null?void 0:a.test}),(s==="minute"||s==="second")&&c.jsxs(c.Fragment,{children:[":",c.jsx(k,{disabled:r,picker:"minutes",date:e,onDateChange:t,ref:u,onLeftFocus:()=>{var n;return(n=y==null?void 0:y.current)==null?void 0:n.focus()},onRightFocus:()=>{var n;return(n=d==null?void 0:d.current)==null?void 0:n.focus()},className:"h-8 text-sm","data-cy":l==null?void 0:l.cy,"data-test":l==null?void 0:l.test})]}),s==="second"&&c.jsxs(c.Fragment,{children:[":",c.jsx(k,{disabled:r,picker:"seconds",date:e,onDateChange:t,ref:d,onLeftFocus:()=>{var n;return(n=u==null?void 0:u.current)==null?void 0:n.focus()},onRightFocus:()=>{var n;return(n=w==null?void 0:w.current)==null?void 0:n.focus()},className:"h-8 text-sm","data-cy":j==null?void 0:j.cy,"data-test":j==null?void 0:j.test})]}),o===12&&c.jsx("div",{className:"grid gap-1 text-center",children:c.jsx(X,{period:m,setPeriod:H,date:e,onDateChange:n=>{t==null||t(n),n&&(n==null?void 0:n.getHours())>=12?H("PM"):H("AM")},ref:w,onLeftFocus:()=>{var n;return(n=d==null?void 0:d.current)==null?void 0:n.focus()}})})]})});Z.displayName="TimePicker";const Be=p.forwardRef(({locale:e=fe,defaultPopupValue:t=new Date(new Date().setHours(0,0,0,0)),value:r,onChange:o,onMonthChange:s,hourCycle:a=24,disabled:l=!1,displayFormat:j,granularity:T="second",placeholder:u="Pick a date",error:y,hideError:d,isTouched:w,className:m,label:H,labelType:n="small",align:b="start",required:P=!1,tooltip:D,...S},v)=>{var E,Y,O,U;const[i,f]=p.useState(r??t),M=p.useRef(null),[A,g]=p.useState(r??void 0);p.useEffect(()=>{g(r)},[r]);const L=x=>{if(!x)return;if(!t){x.setHours((i==null?void 0:i.getHours())??0,(i==null?void 0:i.getMinutes())??0,(i==null?void 0:i.getSeconds())??0),s==null||s(x),f(x);return}const F=(x.getTime()-t.getTime())/(1e3*60*60*24),N=Ae(t,{days:Math.ceil(F)});N.setHours((i==null?void 0:i.getHours())??0,(i==null?void 0:i.getMinutes())??0,(i==null?void 0:i.getSeconds())??0),s==null||s(N),f(N)},R=x=>{x&&(o==null||o(x),f(x),g(x))};return p.useImperativeHandle(v,()=>({...M.current,value:A}),[A]),c.jsxs(ae,{children:[c.jsxs("div",{className:K("flex w-[280px] flex-row",n==="small"&&"flex-col",m==null?void 0:m.trigger),children:[H&&c.jsx(te,{required:P,label:H,labelType:n,tooltip:D,className:{label:m==null?void 0:m.label,tooltip:m==null?void 0:m.tooltip}}),c.jsxs("div",{className:"flex flex-row gap-2",children:[c.jsx(me,{asChild:!0,disabled:l,children:c.jsxs(se,{variant:"outline",type:"button",disabled:l,className:z("w-44 justify-start text-left text-base font-normal",!A&&"text-muted-foreground",!!y&&w&&"border-destructive bg-destructive-background",m==null?void 0:m.input),ref:M,"data-cy":(E=S.dataTrigger)==null?void 0:E.cy,"data-test":(Y=S.dataTrigger)==null?void 0:Y.test,children:[c.jsx(_,{icon:h,className:"mr-2.5 h-4 w-4"}),A?ee(A).format(j??"DD.MM.YYYY, HH:mm"):c.jsx("span",{children:u})]})}),y&&!d&&w&&c.jsx(re,{tooltip:y,delay:0,className:{tooltip:K("max-w-120 text-sm",m==null?void 0:m.error)},children:c.jsx(_,{icon:C,className:"text-destructive mr-1"})})]})]}),c.jsxs(de,{className:"w-auto p-0",align:b,children:[c.jsx(oe,{mode:"single",disabled:l,selected:A,month:i,onSelect:x=>{x&&(x.setHours((i==null?void 0:i.getHours())??0,(i==null?void 0:i.getMinutes())??0,(i==null?void 0:i.getSeconds())??0),R(x))},onMonthChange:L,locale:e,dataNextMonth:S.dataNextMonth,dataPreviousMonth:S.dataPreviousMonth,"data-cy":(O=S.dataCalendar)==null?void 0:O.cy,"data-test":(U=S.dataCalendar)==null?void 0:U.test,...S}),T!=="day"&&c.jsx("div",{className:"border-border border-t p-3",children:c.jsx(Z,{disabled:l,onChange:x=>{o==null||o(x),g(x),x&&f(x)},date:i,hourCycle:a,granularity:T,dataHours:S.dataHours,dataMinutes:S.dataMinutes,dataSeconds:S.dataSeconds})})]})]})});Be.displayName="DateTimePicker";export{Be as D};
