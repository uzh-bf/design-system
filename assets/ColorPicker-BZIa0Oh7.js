import{R as v,r as f,j as g}from"./index-BCoiEVQ_.js";import{A as Z,B as G}from"./index-n6cSTtfq.js";import{F as X}from"./index.es-CGfBVaPE.js";import{t as b}from"./bundle-mjs-BkWO730n.js";import{B as A}from"./Button-Da7yhaiv.js";import{F as N}from"./FormLabel-BBahktE5.js";import{L as tt}from"./Label-BhLBLfHZ.js";import{T as et}from"./Tooltip-CzBZ0WZq.js";function j(){return(j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function z(t,e){if(t==null)return{};var r,o,n={},a=Object.keys(t);for(o=0;o<a.length;o++)e.indexOf(r=a[o])>=0||(n[r]=t[r]);return n}function R(t){var e=f.useRef(t),r=f.useRef(function(o){e.current&&e.current(o)});return e.current=t,r.current}var L=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t<e?e:t},O=function(t){return"touches"in t},P=function(t){return t&&t.ownerDocument.defaultView||self},Y=function(t,e,r){var o=t.getBoundingClientRect(),n=O(e)?function(a,i){for(var l=0;l<a.length;l++)if(a[l].identifier===i)return a[l];return a[0]}(e.touches,r):e;return{left:L((n.pageX-(o.left+P(t).pageXOffset))/o.width),top:L((n.pageY-(o.top+P(t).pageYOffset))/o.height)}},H=function(t){!O(t)&&t.preventDefault()},$=v.memo(function(t){var e=t.onMove,r=t.onKey,o=z(t,["onMove","onKey"]),n=f.useRef(null),a=R(e),i=R(r),l=f.useRef(null),s=f.useRef(!1),c=f.useMemo(function(){var C=function(d){H(d),(O(d)?d.touches.length>0:d.buttons>0)&&n.current?a(Y(n.current,d,l.current)):y(!1)},k=function(){return y(!1)};function y(d){var h=s.current,u=P(n.current),E=d?u.addEventListener:u.removeEventListener;E(h?"touchmove":"mousemove",C),E(h?"touchend":"mouseup",k)}return[function(d){var h=d.nativeEvent,u=n.current;if(u&&(H(h),!function(D,M){return M&&!O(D)}(h,s.current)&&u)){if(O(h)){s.current=!0;var E=h.changedTouches||[];E.length&&(l.current=E[0].identifier)}u.focus(),a(Y(u,h,l.current)),y(!0)}},function(d){var h=d.which||d.keyCode;h<37||h>40||(d.preventDefault(),i({left:h===39?.05:h===37?-.05:0,top:h===40?.05:h===38?-.05:0}))},y]},[i,a]),p=c[0],w=c[1],x=c[2];return f.useEffect(function(){return x},[x]),v.createElement("div",j({},o,{onTouchStart:p,onMouseDown:p,className:"react-colorful__interactive",ref:n,onKeyDown:w,tabIndex:0,role:"slider"}))}),q=function(t){return t.filter(Boolean).join(" ")},J=function(t){var e=t.color,r=t.left,o=t.top,n=o===void 0?.5:o,a=q(["react-colorful__pointer",t.className]);return v.createElement("div",{className:a,style:{top:100*n+"%",left:100*r+"%"}},v.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},m=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r},rt=function(t){return lt(T(t))},T=function(t){return t[0]==="#"&&(t=t.substring(1)),t.length<6?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?m(parseInt(t[3]+t[3],16)/255,2):1}:{r:parseInt(t.substring(0,2),16),g:parseInt(t.substring(2,4),16),b:parseInt(t.substring(4,6),16),a:t.length===8?m(parseInt(t.substring(6,8),16)/255,2):1}},ot=function(t){return ut(at(t))},nt=function(t){var e=t.s,r=t.v,o=t.a,n=(200-e)*r/100;return{h:m(t.h),s:m(n>0&&n<200?e*r/100/(n<=100?n:200-n)*100:0),l:m(n/2),a:m(o,2)}},K=function(t){var e=nt(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},at=function(t){var e=t.h,r=t.s,o=t.v,n=t.a;e=e/360*6,r/=100,o/=100;var a=Math.floor(e),i=o*(1-r),l=o*(1-(e-a)*r),s=o*(1-(1-e+a)*r),c=a%6;return{r:m(255*[o,l,i,i,s,o][c]),g:m(255*[s,o,o,l,i,i][c]),b:m(255*[i,i,s,o,o,l][c]),a:m(n,2)}},F=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},ut=function(t){var e=t.r,r=t.g,o=t.b,n=t.a,a=n<1?F(m(255*n)):"";return"#"+F(e)+F(r)+F(o)+a},lt=function(t){var e=t.r,r=t.g,o=t.b,n=t.a,a=Math.max(e,r,o),i=a-Math.min(e,r,o),l=i?a===e?(r-o)/i:a===r?2+(o-e)/i:4+(e-r)/i:0;return{h:m(60*(l<0?l+6:l)),s:m(a?i/a*100:0),v:m(a/255*100),a:n}},it=v.memo(function(t){var e=t.hue,r=t.onChange,o=q(["react-colorful__hue",t.className]);return v.createElement("div",{className:o},v.createElement($,{onMove:function(n){r({h:360*n.left})},onKey:function(n){r({h:L(e+360*n.left,0,360)})},"aria-label":"Hue","aria-valuenow":m(e),"aria-valuemax":"360","aria-valuemin":"0"},v.createElement(J,{className:"react-colorful__hue-pointer",left:e/360,color:K({h:e,s:100,v:100,a:1})})))}),ct=v.memo(function(t){var e=t.hsva,r=t.onChange,o={backgroundColor:K({h:e.h,s:100,v:100,a:1})};return v.createElement("div",{className:"react-colorful__saturation",style:o},v.createElement($,{onMove:function(n){r({s:100*n.left,v:100-100*n.top})},onKey:function(n){r({s:L(e.s+100*n.left,0,100),v:L(e.v-100*n.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+m(e.s)+"%, Brightness "+m(e.v)+"%"},v.createElement(J,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:K(e)})))}),Q=function(t,e){if(t===e)return!0;for(var r in t)if(t[r]!==e[r])return!1;return!0},ft=function(t,e){return t.toLowerCase()===e.toLowerCase()||Q(T(t),T(e))};function st(t,e,r){var o=R(r),n=f.useState(function(){return t.toHsva(e)}),a=n[0],i=n[1],l=f.useRef({color:e,hsva:a});f.useEffect(function(){if(!t.equal(e,l.current.color)){var c=t.toHsva(e);l.current={hsva:c,color:e},i(c)}},[e,t]),f.useEffect(function(){var c;Q(a,l.current.hsva)||t.equal(c=t.fromHsva(a),l.current.color)||(l.current={hsva:a,color:c},o(c))},[a,t,o]);var s=f.useCallback(function(c){i(function(p){return Object.assign({},p,c)})},[]);return[a,s]}var dt=typeof window<"u"?f.useLayoutEffect:f.useEffect,ht=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},U=new Map,vt=function(t){dt(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!U.has(e)){var r=e.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,U.set(e,r);var o=ht();o&&r.setAttribute("nonce",o),e.head.appendChild(r)}},[])},pt=function(t){var e=t.className,r=t.colorModel,o=t.color,n=o===void 0?r.defaultColor:o,a=t.onChange,i=z(t,["className","colorModel","color","onChange"]),l=f.useRef(null);vt(l);var s=st(r,n,a),c=s[0],p=s[1],w=q(["react-colorful",e]);return v.createElement("div",j({},i,{ref:l,className:w}),v.createElement(ct,{hsva:c,onChange:p}),v.createElement(it,{hue:c.h,onChange:p,className:"react-colorful__last-control"}))},gt={defaultColor:"000",toHsva:rt,fromHsva:function(t){return ot({h:t.h,s:t.s,v:t.v,a:1})},equal:ft},mt=function(t){return v.createElement(pt,j({},t,{colorModel:gt}))},bt=/^#?([0-9A-F]{3,8})$/i,xt=function(t){var e=t.color,r=e===void 0?"":e,o=t.onChange,n=t.onBlur,a=t.escape,i=t.validate,l=t.format,s=t.process,c=z(t,["color","onChange","onBlur","escape","validate","format","process"]),p=f.useState(function(){return a(r)}),w=p[0],x=p[1],C=R(o),k=R(n),y=f.useCallback(function(h){var u=a(h.target.value);x(u),i(u)&&C(s?s(u):u)},[a,s,i,C]),d=f.useCallback(function(h){i(h.target.value)||x(a(r)),k(h)},[r,a,i,k]);return f.useEffect(function(){x(a(r))},[r,a]),v.createElement("input",j({},c,{value:l?l(w):w,spellCheck:"false",onChange:y,onBlur:d}))},V=function(t){return"#"+t},_t=function(t){var e=t.prefixed,r=t.alpha,o=z(t,["prefixed","alpha"]),n=f.useCallback(function(i){return i.replace(/([^0-9A-F]+)/gi,"").substring(0,r?8:6)},[r]),a=f.useCallback(function(i){return function(l,s){var c=bt.exec(l),p=c?c[1].length:0;return p===3||p===6||!!s&&p===4||!!s&&p===8}(i,r)},[r]);return v.createElement(xt,j({},o,{escape:n,format:e?V:void 0,process:V,validate:a}))};function wt(t,e){f.useEffect(()=>{function r(o){t.current&&!t.current.contains(o.target)&&e()}return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[t])}function Lt({color:t,label:e,labelType:r="small",required:o=!1,onSubmit:n,disabled:a,triggerIcon:i,presetColors:l=[],position:s="bottom",submitText:c,colorLabel:p,tooltip:w,colorTooltip:x,error:C,isTouched:k,dataTrigger:y,dataHexInput:d,dataSubmit:h,className:u}){const E=l&&l.length>0?l:["#262FAD","#016272","#5FB1F9","#FE7408","#D84B39"],[D,M]=f.useState(!1),[S,B]=f.useState(t),I=f.useRef(null);return wt(I,()=>{M(!1),B(t)}),g.jsxs("div",{className:b("flex w-full flex-row",r==="small"&&"flex-col",u==null?void 0:u.root),children:[e&&g.jsx(N,{required:o,label:e,labelType:r,tooltip:w,className:u}),g.jsxs("div",{className:"flex flex-row items-center gap-2",children:[g.jsxs("div",{className:b("align-center relative flex w-20 justify-end rounded-lg",u==null?void 0:u.pickerRoot),style:{backgroundColor:t??"#0028A5"},children:[g.jsx(A,{onClick:()=>M(!0),disabled:a,data:y,className:{root:b("disabled:cursor-not-allowed disabled:opacity-100",u==null?void 0:u.trigger)},children:g.jsx(X,{icon:i||Z,className:b(a&&"opacity-50")})}),D&&g.jsxs("div",{className:b("absolute flex h-[10rem] w-[23rem] flex-row rounded-md bg-white p-1 shadow-md outline outline-2 outline-uzh-grey-40",s==="bottom"&&"left-10 top-8",s==="top"&&"bottom-8 left-10",s==="bottom-left"&&"-left-[18rem] top-8",s==="top-left"&&"-left-[18rem] bottom-8",u==null?void 0:u.popover),ref:I,children:[g.jsx(mt,{style:{width:"300px",height:"150px"},color:S,onChange:B}),g.jsx("div",{className:"grid grid-cols-1 justify-items-center gap-0.5 pl-2",children:E.map((_,W)=>g.jsx(A,{className:{root:b("h-7 w-7 rounded-2xl border-none",u==null?void 0:u.presetButtons)},style:{backgroundColor:_},onClick:()=>B(_)},W))}),g.jsxs("div",{className:"ml-4 flex flex-col justify-between",children:[g.jsxs("div",{className:"flex flex-col",children:[g.jsx(tt,{label:p,className:{root:b("my-auto -mb-0.5 min-w-max text-base font-bold leading-6 text-gray-600",u==null?void 0:u.inputLabel),tooltip:b("text-sm font-normal",u==null?void 0:u.inputTooltip),tooltipSymbol:"h-2 w-2"},tooltip:x,showTooltipSymbol:typeof x<"u"}),g.jsx(_t,{className:b("focus:border-uzh-blue-50 h-9 w-24 rounded border border-uzh-grey-60 pl-2 placeholder-slate-400",u==null?void 0:u.input),color:S,onChange:B,"data-cy":d==null?void 0:d.cy,"data-text":d==null?void 0:d.test})]}),g.jsx(A,{primary:!0,className:{root:b("float-right h-max w-full justify-center self-end",u==null?void 0:u.submit)},type:"submit",onClick:_=>{_==null||_.preventDefault(),_==null||_.stopPropagation(),n(S),M(!1)},disabled:t===S,data:h,children:c})]})]})]}),C&&k&&g.jsx(et,{tooltip:C,delay:0,className:{tooltip:"max-w-[30rem] text-sm"},children:g.jsx(X,{icon:G,className:"mr-1 text-red-600"})})]})]})}export{Lt as C};
