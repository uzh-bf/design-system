import{r as t,j as q}from"./index-DNKnBQbc.js";import{c as K}from"./utils-BDfbtdGL.js";var Re=Object.defineProperty,Te=Object.defineProperties,De=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,fe=(r,a,l)=>a in r?Re(r,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):r[a]=l,Oe=(r,a)=>{for(var l in a||(a={}))ve.call(a,l)&&fe(r,l,a[l]);if(Q)for(var l of Q(a))ge.call(a,l)&&fe(r,l,a[l]);return r},Ae=(r,a)=>Te(r,De(a)),We=(r,a)=>{var l={};for(var i in r)ve.call(r,i)&&a.indexOf(i)<0&&(l[i]=r[i]);if(r!=null&&Q)for(var i of Q(r))a.indexOf(i)<0&&ge.call(r,i)&&(l[i]=r[i]);return l};function Be(r){let a=setTimeout(r,0),l=setTimeout(r,10),i=setTimeout(r,50);return[a,l,i]}function Ie(r){let a=t.useRef();return t.useEffect(()=>{a.current=r}),a.current}var _e=18,he=40,Fe=`${he}px`,Ne=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function He({containerRef:r,inputRef:a,pushPasswordManagerStrategy:l,isFocused:i}){let[E,d]=t.useState(!1),[k,M]=t.useState(!1),[A,F]=t.useState(!1),N=t.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&E&&k,[E,k,l]),W=t.useCallback(()=>{let f=r.current,y=a.current;if(!f||!y||A||l==="none")return;let h=f,S=h.getBoundingClientRect().left+h.offsetWidth,B=h.getBoundingClientRect().top+h.offsetHeight/2,u=S-_e,H=B;document.querySelectorAll(Ne).length===0&&document.elementFromPoint(u,H)===f||(d(!0),F(!0))},[r,a,A,l]);return t.useEffect(()=>{let f=r.current;if(!f||l==="none")return;function y(){let S=window.innerWidth-f.getBoundingClientRect().right;M(S>=he)}y();let h=setInterval(y,1e3);return()=>{clearInterval(h)}},[r,l]),t.useEffect(()=>{let f=i||document.activeElement===a.current;if(l==="none"||!f)return;let y=setTimeout(W,0),h=setTimeout(W,2e3),S=setTimeout(W,5e3),B=setTimeout(()=>{F(!0)},6e3);return()=>{clearTimeout(y),clearTimeout(h),clearTimeout(S),clearTimeout(B)}},[a,i,l,W]),{hasPWMBadge:E,willPushPWMBadge:N,PWM_BADGE_SPACE_WIDTH:Fe}}var be=t.createContext({}),we=t.forwardRef((r,a)=>{var l=r,{value:i,onChange:E,maxLength:d,textAlign:k="left",pattern:M,placeholder:A,inputMode:F="numeric",onComplete:N,pushPasswordManagerStrategy:W="increase-width",pasteTransformer:f,containerClassName:y,noScriptCSSFallback:h=Le,render:S,children:B}=l,u=We(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),H,ne,re,ae,le;let[Ee,Se]=t.useState(typeof u.defaultValue=="string"?u.defaultValue:""),s=i??Ee,j=Ie(s),L=t.useCallback(e=>{E==null||E(e),Se(e)},[E]),w=t.useMemo(()=>M?typeof M=="string"?new RegExp(M):M:null,[M]),c=t.useRef(null),U=t.useRef(null),X=t.useRef({value:s,onChange:L,isIOS:typeof window<"u"&&((ne=(H=window==null?void 0:window.CSS)==null?void 0:H.supports)==null?void 0:ne.call(H,"-webkit-touch-callout","none"))}),Z=t.useRef({prev:[(re=c.current)==null?void 0:re.selectionStart,(ae=c.current)==null?void 0:ae.selectionEnd,(le=c.current)==null?void 0:le.selectionDirection]});t.useImperativeHandle(a,()=>c.current,[]),t.useEffect(()=>{let e=c.current,n=U.current;if(!e||!n)return;X.current.value!==e.value&&X.current.onChange(e.value),Z.current.prev=[e.selectionStart,e.selectionEnd,e.selectionDirection];function p(){if(document.activeElement!==e){$(null),z(null);return}let o=e.selectionStart,m=e.selectionEnd,J=e.selectionDirection,b=e.maxLength,T=e.value,x=Z.current.prev,C=-1,P=-1,D;if(T.length!==0&&o!==null&&m!==null){let ke=o===m,Me=o===T.length&&T.length<b;if(ke&&!Me){let O=o;if(O===0)C=0,P=1,D="forward";else if(O===b)C=O-1,P=O,D="backward";else if(b>1&&T.length>1){let te=0;if(x[0]!==null&&x[1]!==null){D=O<x[1]?"backward":"forward";let je=x[0]===x[1]&&x[0]<b;D==="backward"&&!je&&(te=-1)}C=te+O,P=te+O+1}}C!==-1&&P!==-1&&C!==P&&c.current.setSelectionRange(C,P,D)}let pe=C!==-1?C:o,me=P!==-1?P:m,Pe=D??J;$(pe),z(me),Z.current.prev=[pe,me,Pe]}if(document.addEventListener("selectionchange",p,{capture:!0}),p(),document.activeElement===e&&Y(!0),!document.getElementById("input-otp-style")){let o=document.createElement("style");if(o.id="input-otp-style",document.head.appendChild(o),o.sheet){let m="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";V(o.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),V(o.sheet,`[data-input-otp]:autofill { ${m} }`),V(o.sheet,`[data-input-otp]:-webkit-autofill { ${m} }`),V(o.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),V(o.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let v=()=>{n&&n.style.setProperty("--root-height",`${e.clientHeight}px`)};v();let g=new ResizeObserver(v);return g.observe(e),()=>{document.removeEventListener("selectionchange",p,{capture:!0}),g.disconnect()}},[]);let[oe,ie]=t.useState(!1),[G,Y]=t.useState(!1),[R,$]=t.useState(null),[I,z]=t.useState(null);t.useEffect(()=>{Be(()=>{var e,n,p,v;(e=c.current)==null||e.dispatchEvent(new Event("input"));let g=(n=c.current)==null?void 0:n.selectionStart,o=(p=c.current)==null?void 0:p.selectionEnd,m=(v=c.current)==null?void 0:v.selectionDirection;g!==null&&o!==null&&($(g),z(o),Z.current.prev=[g,o,m])})},[s,G]),t.useEffect(()=>{j!==void 0&&s!==j&&j.length<d&&s.length===d&&(N==null||N(s))},[d,N,j,s]);let _=He({containerRef:U,inputRef:c,pushPasswordManagerStrategy:W,isFocused:G}),ue=t.useCallback(e=>{let n=e.currentTarget.value.slice(0,d);if(n.length>0&&w&&!w.test(n)){e.preventDefault();return}typeof j=="string"&&n.length<j.length&&document.dispatchEvent(new Event("selectionchange")),L(n)},[d,L,j,w]),se=t.useCallback(()=>{var e;if(c.current){let n=Math.min(c.current.value.length,d-1),p=c.current.value.length;(e=c.current)==null||e.setSelectionRange(n,p),$(n),z(p)}Y(!0)},[d]),ce=t.useCallback(e=>{var n,p;let v=c.current;if(!f&&(!X.current.isIOS||!e.clipboardData||!v))return;let g=e.clipboardData.getData("text/plain"),o=f?f(g):g;e.preventDefault();let m=(n=c.current)==null?void 0:n.selectionStart,J=(p=c.current)==null?void 0:p.selectionEnd,b=(m!==J?s.slice(0,m)+o+s.slice(J):s.slice(0,m)+o+s.slice(m)).slice(0,d);if(b.length>0&&w&&!w.test(b))return;v.value=b,L(b);let T=Math.min(b.length,d-1),x=b.length;v.setSelectionRange(T,x),$(T),z(x)},[d,L,w,s]),xe=t.useMemo(()=>({position:"relative",cursor:u.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[u.disabled]),de=t.useMemo(()=>({position:"absolute",inset:0,width:_.willPushPWMBadge?`calc(100% + ${_.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:_.willPushPWMBadge?`inset(0 ${_.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:k,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[_.PWM_BADGE_SPACE_WIDTH,_.willPushPWMBadge,k]),ye=t.useMemo(()=>t.createElement("input",Ae(Oe({autoComplete:u.autoComplete||"one-time-code"},u),{"data-input-otp":!0,"data-input-otp-placeholder-shown":s.length===0||void 0,"data-input-otp-mss":R,"data-input-otp-mse":I,inputMode:F,pattern:w==null?void 0:w.source,"aria-placeholder":A,style:de,maxLength:d,value:s,ref:c,onPaste:e=>{var n;ce(e),(n=u.onPaste)==null||n.call(u,e)},onChange:ue,onMouseOver:e=>{var n;ie(!0),(n=u.onMouseOver)==null||n.call(u,e)},onMouseLeave:e=>{var n;ie(!1),(n=u.onMouseLeave)==null||n.call(u,e)},onFocus:e=>{var n;se(),(n=u.onFocus)==null||n.call(u,e)},onBlur:e=>{var n;Y(!1),(n=u.onBlur)==null||n.call(u,e)}})),[ue,se,ce,F,de,d,I,R,u,w==null?void 0:w.source,s]),ee=t.useMemo(()=>({slots:Array.from({length:d}).map((e,n)=>{var p;let v=G&&R!==null&&I!==null&&(R===I&&n===R||n>=R&&n<I),g=s[n]!==void 0?s[n]:null,o=s[0]!==void 0?null:(p=A==null?void 0:A[n])!=null?p:null;return{char:g,placeholderChar:o,isActive:v,hasFakeCaret:v&&g===null}}),isFocused:G,isHovering:!u.disabled&&oe}),[G,oe,d,I,R,u.disabled,s]),Ce=t.useMemo(()=>S?S(ee):t.createElement(be.Provider,{value:ee},B),[B,ee,S]);return t.createElement(t.Fragment,null,h!==null&&t.createElement("noscript",null,t.createElement("style",null,h)),t.createElement("div",{ref:U,"data-input-otp-container":!0,style:xe,className:y},Ce,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},ye)))});we.displayName="Input";function V(r,a){try{r.insertRule(a)}catch{console.error("input-otp could not insert CSS rule:",a)}}var Le=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;function ze({className:r,containerClassName:a,...l}){return q.jsx(we,{"data-slot":"input-otp",containerClassName:K("flex items-center gap-2 has-disabled:opacity-50",a),className:K("disabled:cursor-not-allowed",r),...l})}function Ve({className:r,...a}){return q.jsx("div",{"data-slot":"input-otp-group",className:K("flex items-center",r),...a})}function qe({index:r,className:a,...l}){const i=t.useContext(be),{char:E,hasFakeCaret:d,isActive:k}=(i==null?void 0:i.slots[r])??{};return q.jsxs("div",{"data-slot":"input-otp-slot","data-active":k,className:K("data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",a),...l,children:[E,d&&q.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:q.jsx("div",{className:"animate-caret-blink bg-foreground h-4 w-px duration-1000"})})]})}export{ze as I,Ve as a,qe as b};
