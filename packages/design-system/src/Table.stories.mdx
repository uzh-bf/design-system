import Button from './Button'
import Table from './Table'
import UserNotification from './UserNotification'
import { data } from './tableData'
import { useRef } from 'react'

{/* START README */}

The table component is a custom components for the visualization of tabular data, directly supporting functionalities like sorting, formatting, and custom transformers.

<br />

The Table component accepts the following props:

- @param id - The id of the table.
- @param dataAttributes - The object of data attributes that can be used for testing (e.g. data-test or data-cy)
- @param columns - The columns of the table. The columns are defined by an array of objects where each object has a label, an accessor and optional transformer and formatters.
- @param data - The data of the table. The data is defined by an array of objects where each object has a key-value pair for each column.
- @param caption - The optional caption of the table.
- @param ref - The optional ref object allows you to access the table methods.
- @param className - The optional className object allows you to override the default styling.
- @param forwardedRef - The optional forwardedRef object allows you to access table methods from the parent component.
- @param emptyCellText - The optional emptyCellText allows you to define the text that should be displayed in empty cells.
- @param defaultSortField - The optional defaultSortField allows you to define the default sorting field.
- @param defaultSortOrder - The optional defaultSortOrder allows you to define the default sorting order.

{/* END README */}

export const Simple = () => {
  return (
    <div>
      <UserNotification
        type="info"
        message="When using the table component with custom transformers and / or formatters, be aware of the use of suitable generics to avoid type errors in your code (not supported by the markdown stories). All column names (as well as possible derived ones) and their corresponding data type have to be combine in one key-value object and passed to the table component as a generic. E.g. the Combined component illustrates how this can be accomplished"
        className={{ root: 'mb-4' }}
      />
      <Table
        columns={[
          { label: 'Count', accessor: 'count', sortable: true },
          { label: 'Answer', accessor: 'answer', sortable: true },
          { label: 'Username', accessor: 'username', sortable: false },
        ]}
        data={data}
        caption="Table with example data"
      />
    </div>
  )
}

export const DefaultSorting = () => {
  return (
    <div>
      <UserNotification
        type="info"
        message="When using the table component with custom transformers and / or formatters, be aware of the use of suitable generics to avoid type errors in your code (not supported by the markdown stories). All column names (as well as possible derived ones) and their corresponding data type have to be combine in one key-value object and passed to the table component as a generic. E.g. the Combined component illustrates how this can be accomplished"
        className={{ root: 'mb-4' }}
      />
      <Table
        columns={[
          { label: 'Count', accessor: 'count', sortable: true },
          { label: 'Answer', accessor: 'answer', sortable: true },
          { label: 'Username', accessor: 'username', sortable: false },
        ]}
        data={data}
        caption="Table with example data"
        defaultSortField="count"
        defaultSortOrder="desc"
      />
    </div>
  )
}

export const Sorting = () => {
  return (
    <div>
      <UserNotification
        type="info"
        message="When using the table component with custom transformers and / or formatters, be aware of the use of suitable generics to avoid type errors in your code (not supported by the markdown stories). All column names (as well as possible derived ones) and their corresponding data type have to be combine in one key-value object and passed to the table component as a generic. E.g. the Combined component illustrates how this can be accomplished"
        className={{ root: 'mb-4' }}
      />
      <Table
        columns={[{ label: 'Count', accessor: 'count', sortable: true }]}
        data={[{ count: 100 }, { count: -50 }, { count: -70 }, { count: 30 }]}
        caption="Table with example data"
      />
    </div>
  )
}

export const ResetTable = () => {
  const ref = useRef(null)

return (

<>
  <UserNotification
    type="info"
    message="When using the table component with custom transformers and / or formatters, be aware of the use of suitable generics to avoid type errors in your code (not supported by the markdown stories). All column names (as well as possible derived ones) and their corresponding data type have to be combine in one key-value object and passed to the table component as a generic. E.g. the Combined component illustrates how this can be accomplished"
    className={{ root: 'mb-4' }}
  />
  <Button
    onClick={() => {
      ref.current.reset()
    }}
  >
    Reset Table Filters
  </Button>
  <Table
    columns={[
      {
        label: 'Count',
        accessor: 'count',
        sortable: true,
        transformer: ({ row }) =>
          row['count'] < 0 ? row['count'] * 200 : row['count'],
      },
      { label: 'Answer', accessor: 'answer', sortable: true },
      { label: 'Username', accessor: 'username', sortable: false },
    ]}
    data={data}
    caption="Table with example data"
    forwardedRef={ref}
  />
</>
) }

export const Formatted = () => {
  return (
    <div>
      <UserNotification
        type="info"
        message="When using the table component with custom transformers and / or formatters, be aware of the use of suitable generics to avoid type errors in your code (not supported by the markdown stories). All column names (as well as possible derived ones) and their corresponding data type have to be combine in one key-value object and passed to the table component as a generic. E.g. the Combined component illustrates how this can be accomplished"
        className={{ root: 'mb-4' }}
      />
      <Table
        columns={[
          {
            label: 'Count',
            accessor: 'count',
            sortable: true,
            formatter: ({ row }) => `${row['count']}%`,
          },
          {
            label: 'Answer',
            accessor: 'answer',
            sortable: true,
            className: 'font-bold italic',
            formatter: ({ row }) => (
              <div className="bg-red-300">{row['answer']}</div>
            ),
          },
          { label: 'Username', accessor: 'username', sortable: false },
        ]}
        data={[
          {
            className: 'text-green-200',
            ...data[0],
          },
          ...data,
        ]}
        caption="Table with example data"
        className={{
          root: 'bg-white',
          tableHeader: 'bg-gray-200',
          body: 'bg-gray-100',
          row: 'bg-white',
        }}
      />
    </div>
  )
}

export const Combined = () => {
  return (
    <div>
      <UserNotification
        type="info"
        message="When using the table component with custom transformers and / or formatters, be aware of the use of suitable generics to avoid type errors in your code (not supported by the markdown stories). All column names (as well as possible derived ones) and their corresponding data type have to be combine in one key-value object and passed to the table component as a generic. E.g. the Combined component illustrates how this can be accomplished"
        className={{ root: 'mb-4' }}
      />
      <Table
        columns={[
          {
            label: 'Count',
            accessor: 'count',
            sortable: true,
            // the transformer will be applied to the data before sorting
            transformer: ({ row }) =>
              row['count'] > 10 ? row['count'] : row['count'] * 10,
            formatter: ({ row }) => `${row['count']}%`,
          },
          {
            label: 'Answer',
            accessor: 'answer',
            sortable: true,
            formatter: ({ row }) => <div>{row['answer'].toUpperCase()}</div>,
          },
          { label: 'Username', accessor: 'username', sortable: false },
        ]}
        data={data}
        caption="Table with example data"
        className={{
          root: 'bg-white',
          tableHeader: 'bg-gray-200',
          body: 'bg-gray-100',
          row: 'bg-white',
        }}
      />
    </div>
  )
}
